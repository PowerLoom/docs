---
sidebar_position: 4
---

# Snapshot composition

The protocol state collects finalized snapshots for incremental epochs against contracts configured as data sources. These snapshots can be further composed with either one or a combination of the following strategies 

* primitives like map-reduce, summation, filter etc
* a specific span of epochs to denote a time period, for eg, 24 hours
* and anything else you can think of...!

## Single project composition

We can compose snapshots on top of base snapshots for a single contract.

![single project composition](/images/single_project_composition.png)

## Multiple projects composition

As defined by the data sources configuration, the protocol state collects snapshots across multiple smart contracts which can be further composed according to the strategies outlined in the beginning of this page.

![Multiple projects snapshots](/images/multi_projects_snapshots.png)

## Higher order aggregations

An example of this can be found in the [Uniswap V2 dashboard implementation](/docs/build-with-powerloom/use-cases/existing-implementations/uniswapv2-dashboard/) where trade activity aggregation dataset is generated by 

* combining individual snapshots of trade volume and feees across multiple pair contracts 
* spanning a specific set of epochs that satisfy a time duration, for eg, 24 hours

Since all snapshots are finalized on an epoch basis, you can weave together snapshots across multiple contracts and accurately derive complex data compositions without approximations.

![Multiple projects composition](/images/multi_projects_composition.png)

### Dependency graph

All of this is controlled by the dependency graph as specified in the data market's configuration of data sources.

![Data composition dependency graph](/images/DependencyDataComposition.png)
